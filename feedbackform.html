<html><head>
    <title>Training Feedback Form</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <!--<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
    scale=1.0">
    <style>
        .pointer { cursor: pointer; }
        .crosshair { cursor: crosshair; }
        .text { cursor: text; }
        body, html {
            height: 100%;
            margin: 0;
            display: grid;
            place-items: center;
            background-color: #bde4fa;
        }
        input[type="radio"] {
            text-align: center;
            margin: 0 100px 0 20px;
            transform: scale(4.5); /* Adjust the scale value as needed */
            background-color: #ffee05;
        }
        input[type="checkbox"] {
            margin: 0 80px 0 20px;
            transform: scale(4.5); /* Adjust the scale value as needed */
            background-color: #ffee05;
        }
        input[type="date"] {
            font-size: 50px;
            border: 5px solid #110101;
            padding: 12px 20px;
            background-color: #ffee05;
        }
        textarea {
            width: 90%;
            font-size: 50px;
            padding: 12px 20px;
            border: 5px solid #141010;
            border-radius: 4px;
            background-color: #ffee05;
            resize: none;
        }
        select {
            font-size: 50px;
            border: 5px solid #110101;
            padding: 12px 20px;
            background-color: #ffee05;
        }
        option {
            font-size: 50px;
            border:5px solid #110101;
            padding: 12px 20px;
            background-color: #ffee05;
        }
        form {
            font-size: 50px;
            border:2px solid #110101;
            padding: 12px 20px;
            background-color: #ffee05;
        }
        .textbox {
            width: 80%;
            border: 5px solid#110101; /* Black border with 2px width */
            padding: 10px; /* Add some padding */
            background-color: #ffee05;
        }
    </style>
</head>

<body>
    <h1 style="text-align: center;font-size:130px;font-family:'Courier New"><strong>Training Feedback Form</strong></h1><br>
    <!--<img src="Simon.jpg" alt="Cork Simon logo" width="250" height="300"><br/><p></p>
            
            <!--<label style="font-size:70px" for="birthday">Date today    :</label>
            <input style="font-size:70px" type="date" id="birthday" name="birthday">
            <br/><br/>
            <th><a style="font-size:70px" title="Course Name">Course attended : <input type="text" class="textbox" placeholder="Type course name here" name="course" /></a></th>
            <br/><br/>
            <hr>-->
            <th><a style="text-align: center;font-size:70px" title="Name ">Your name (optional) : <input type="text" class="textbox" placeholder="Type your name here" name="name" /></a></th>
            <br><br><br><br><br><br>
            <th><a style="text-align: center;font-size:70px"><strong> Were you happy with the course ? </strong>
            <br>
            Yes <input type="radio" name="Status" value="Yes" id="Yes">
            No <input type="radio" name="Status" value="No" id="No"><br>
            <br/>
            <!--<th><a style="font-size:50px" title="Comment">Write a comment : <input type="text" name="comment" /></a></th>
            <br/><br/>
            <br><br> -->
            <th><a style="text-align: center;font-size:70px"><strong>How would you rate the course overall ?</strong ></a></th><br>  
                <a style="text-align: center;font-size:60px"> Poor <input type="radio" name="Status1" value="Poor" id="Terribe">
                   Fair <input type="radio" name="Status1" value="Bad" id="Bad">
                Satisfactory <input type="radio" name="Status1" value="OK" id="OK">
                Good <input type="radio" name="Status1" value="Very good" id="Very good">
                Excellent <input type="radio" name="Status1" value="Fantastic" id="Fantastic"><br>
            <br/>
            <th><a style="text-align: center;font-size:70px" title="Comment">Write a comment (optional) : <textarea name="Text1" rows="2" placeholder="Type a comment here about the course"></textarea></a></th>
            <br/><br/>
            <br><br>
            <th><a style="text-align: center;font-size:70px"><strong>Let us know your thoughts on the venue</strong > </a></th><br>  
                <a style="text-align: center;font-size:60px"> Poor <input type="radio" name="Status2" value="Terribe" id="Terribe">
                    Fair     <input type="radio" name="Status2" value="Bad" id="Bad">
                    Satisfactory <input type="radio" name="Status2" value="OK" id="OK">
                    Good <input type="radio" name="Status2" value="Very good" id="Very good">
                    Excellent <input type="radio" name="Status2" value="Fantastic" id="Fantastic"><br>
                <br/>
                <!--<th><a style="font-size:50px" title="Comment">Write a comment : <input type="text" name="comment" /></a></th>
                <br/><br/>
                <br><br>-->
                <th><a style="text-align: center;font-size:70px"><strong>What score would you give the tutor ?</strong ></a></th><br>  
                <a style="text-align: center;font-size:60px"> Poor <input type="radio" name="Status3" value="Terribe" id="Terribe">
                    Fair     <input type="radio" name="Status3" value="Bad" id="Bad">
                    Satisfactory <input type="radio" name="Status3" value="OK" id="OK">
                    Good <input type="radio" name="Status3" value="Very good" id="Very good">
                    Excellent <input type="radio" name="Status3" value="Fantastic" id="Fantastic"><br>
                <br/>
                <!--<th><a style="font-size:50px" title="Comment">Write a comment : <input type="text" name="comment" /></a></th>
                <br/><br/>
                <br><br>-->
                <th><a style="text-align: center;font-size:70px"><strong>What score would you give the course materials ?</strong > (handouts,etc)</a></th><br>  
                    <a style="text-align: center;font-size:60px"> Poor <input type="radio" name="Status4" value="Terribe" id="Terribe">
                        Fair     <input type="radio" name="Status4" value="Bad" id="Bad">
                        Satisfactory <input type="radio" name="Status4" value="OK" id="OK">
                        Good <input type="radio" name="Status4" value="Very good" id="Very good">
                        Excellent <input type="radio" name="Status4" value="Fantastic" id="Fantastic"><br>
                    <br/>
                    <!--<th><a style="font-size:50px" title="Comment">Write a comment : <input type="text" name="comment" /></a></th>
                    <br/><br/>
                    <br><br>-->
                    <th><a style="text-align: center;font-size:70px"><strong>Course administration </strong >   (Were you happy with the information you received prior to starting the course ?)</a></th><br>
                     
                    <a style="text-align: center;font-size:60px"> Poor <input type="radio" name="Status5" value="Terribe" id="Terribe">
                        Fair     <input type="radio" name="Status5" value="Bad" id="Bad">
                        Satisfactory <input type="radio" name="Status5" value="OK" id="OK">
                        Good <input type="radio" name="Status5" value="Very good" id="Very good">
                        Excellent <input type="radio" name="Status5" value="Fantastic" id="Fantastic"><br>
                    <br/>
                    <!--<th><a style="font-size:50px" title="Comment">Write a comment : <input type="text" name="comment" /></a></th>
                    <br/><br/>
                    <br><br>-->
                    <th><a style="font-size:70px"><strong>Feedback from tutor</strong ></a></th><br>  
                    <a style="text-align: center;font-size:70px"> Poor <input type="radio" name="Status6" value="Terribe" id="Terribe">
                        Fair     <input type="radio" name="Status6" value="Bad" id="Bad">
                        Satisfactory <input type="radio" name="Status6" value="OK" id="OK">
                        Good <input type="radio" name="Status6" value="Very good" id="Very good">
                        Excellent <input type="radio" name="Status6" value="Fantastic" id="Fantastic"><br>
                    <br/>
                    <th><a style="text-align: center;font-size:100px">Any other comments : <br/><textarea name="Text1" cols="60" rows="4" placeholder="Type any other comments here"></textarea></a></th><br>
            <br/><br/><br/><br/><br/><br/>
                    <!--<th><a style="font-size:50px" title="Comment">Write a comment : <input type="text" name="comment" /></a></th>
                    <br/><br/> 
                    <br><br>
                <th><a style="font-size:70px"> Are there any areas that you felt should have been covered in more detail by the course ?<br/><textarea name="Text1" cols="40" rows="2"></textarea></a></th>
                <br/><br/>   
            <hr>
            <br/><br/><br/>
            <br><br>-->
            <h2 style="font-size:100px" style="font-family:'Courier New'"><strong>WHAT'S NEXT ? </strong></h2><br>

           <!-- <form name="form1" id="form1" action="/action_page.php">
                <a style="font-size:100px">What course would you like to do next ?<br> Select a course from the dropdown menu below:<br></a> <select style="font-size:100px;" name="subject" id="subject"><br>
                  <br>
                  <option value="" selected="selected">Select course</option>
                  <option value="" selected="selected">Forklift</option>
                  <option value="" selected="selected">Power Pallet</option>
                  <option value="" selected="selected">Food Hygiene</option>
                  <option value="" selected="selected">Safepass</option>
                  <option value="" selected="selected">Manual Handling</option>
                  <option value="" selected="selected">Basic First Aid</option>
                  <option value="" selected="selected">Abrasive Wheels</option>
                  <option value="" selected="selected">Working at Heights</option>
                  <option value="" selected="selected">Working in Confined Spaces</option>
                </select>
                <br/><br/><br/>
                <br><br>
                <a background-color="#eeff05" style="font-size:100px">Any other courses you'd like to do ? <br> Select another course from the dropdown menu below: </a> <select style="font-size:100px;" name="topic" id="topic">
                    <option value="" selected="selected">Select course</option>
                    <option value="" selected="selected">Forklift</option>
                    <option value="" selected="selected">Power Pallet</option>
                    <option value="" selected="selected">Food Hygiene</option>
                    <option value="" selected="selected">Safepass</option>
                    <option value="" selected="selected">Manual Handling</option>
                    <option value="" selected="selected">Basic First Aid</option>
                    <option value="" selected="selected">Abrasive Wheels</option>
                    <option value="" selected="selected">Working at Heights</option>
                    <option value="" selected="selected">Working in Confined Spaces</option>
                </select>
                <br/><br/><br/>
                <br><br>
                <th><a style="font-size:100px" title="Comment">Are you interested in any other courses ? <textarea name="Text1" cols="40" rows="2" placeholder="Type course names here "></textarea></a></th>
                <br/><br/><br/>
                <br/><br/>-->
                <form>
                    
                    <p>Please indicate which training courses interest you :</p>
                    <label for="subscribe">- Safepass</label>
                    <input type="checkbox" id="subscribe" name="subscribe" value="newsletter">
                    <br>
                    <label for="subscribe1">- Other Construction Courses</label>
                    <input type="checkbox" id="subscribe1" name="subscribe" value="newsletter">
                    <br>
                    <label for="subscribe2">- Warehouse Courses</label>
                    <input type="checkbox" id="subscribe2" name="subscribe" value="newsletter">
                    <br>
                    <label for="subscribe3">- Food and Hospitality Courses</label>
                    <input type="checkbox" id="subscribe3" name="subscribe" value="newsletter">
                    <br>
                    <label for="subscribe4">- First Aid</label>
                    <input type="checkbox" id="subscribe4" name="subscribe" value="newsletter">
                    <br>
                    <label for="subscribe5">- Career Planning and Preparation</label>
                    <input type="checkbox" id="subscribe5" name="subscribe" value="newsletter">
                    <br>
                    <label for="subscribe6">- Personal Development Courses</label>
                    <input type="checkbox" id="subscribe6" name="subscribe" value="newsletter">
                </form>
            <br/><div> <button style="font-size : 120px; width: 700px; height: 300px;"  id="submitButton" onclick="submit()">SUBMIT</button></div>
            <br/><br/>

            <a style="text-align: center;font-size:100px"><strong>Thank you for completing this form. </strong></a>
            <br><br/>
            <hr>
    <div id='submitForm' style="display: none">
        <h2><span Name="submitLabel">Submit</h2>
        <input type="hidden" name="id"/>
        Your Name <input type="text" name="student_name" /> <br/>
        Date <input type="date" name="date"/> <br/>
        Course Name <input type="text" name="course_name"/> <br/>
        <!--Years in Office <input type="number" name="years"/> <br/>-->
        <span><button id="doSubmitButton" onclick="doSubmit()">SUBMIT</button></span>
</div>
<!--<img src="Simon.jpg" alt="Cork Simon logo" width="1400" height="1400"><br/><p></p>-->
</body>
<script>
    function Print(){
        printResidentAjax()
    }

    function submit(){
        document.getElementById('submitButton').style.display="none"
        document.getElementById('feedbackTable').style.display="none"
        document.getElementById('createUpdateForm').style.display="block"

        document.getElementById('createLabel').style.display="inline"
        document.getElementById('updateLabel').style.display="none"

        document.getElementById('doSubmitButton').style.display="block"
        document.getElementById('doUpdateButton').style.display="none"
    
        }
    function showViewAllRes(){
        document.getElementById('showCreateButton').style.display="block"
        document.getElementById('feedbackTable').style.display="block"
        document.getElementById('createUpdateForm').style.display="none"
        }

    function showUpdateRes(buttonElement){
        document.getElementById('showCreateButton').style.display="none"
        document.getElementById('feedbackTable').style.display="none"
        document.getElementById('createUpdateForm').style.display="block"

        document.getElementById('createLabel').style.display="none"
        document.getElementById('updateLabel').style.display="inline"

        document.getElementById('doCreateButton').style.display="none"
        document.getElementById('doUpdateButton').style.display="block"


        var rowElement = buttonElement.parentNode.parentNode
        // this is a way of finding the closest <tr> which would safer, closest()
        
        var resident = getResidentFromRow(rowElement)
        populateFormWithResident(resident)
    }
    function doCreateFeedback(){
            var form = document.getElementById('createUpdateForm')
    
            var feedback = {}
           
            resident.id = form.querySelector('input[name="id"]').value
            resident.name = form.querySelector('input[name="student_name"]').value
            resident.age = form.querySelector('input[name="date"]').value
            resident.ppsn = form.querySelector('input[name="course_name"]').value
            console.log(JSON.stringify(feedback))
            createResidentAjax(feedback)
        }
    function doCreateRes(){
            var form = document.getElementById('createUpdateForm')
    
            var resident = {}
           
            resident.id = form.querySelector('input[name="id"]').value
            resident.name = form.querySelector('input[name="name"]').value
            resident.age = form.querySelector('input[name="age"]').value
            resident.ppsn = form.querySelector('input[name="ppsn"]').value
            console.log(JSON.stringify(resident))
            createResidentAjax(resident)
        }

        function doUpdateRes(){
            var resident = getResidentFromForm();
            var rowElement = document.getElementById(resident.id);
            updateResidentAjax(resident);
            setResidentInRow(rowElement,resident);
           
            clearResForm();
            showViewAllRes();
        }

        function doDeleteRes(r){
            var tableElement = document.getElementById('residentTable');
            var rowElement = r.parentNode.parentNode;
            var index = rowElement.rowIndex;
            deleteResidentAjax(rowElement.getAttribute("id"));
            tableElement.deleteRow(index);
        }

    function addResidentToTable(resident){
        var tableElement = document.getElementById('residentTable')
        var rowElement = tableElement.insertRow(-1)
        rowElement.setAttribute('id',resident.id)
        var cell1 = rowElement.insertCell(0);
        cell1.innerHTML = resident.id
        var cell2 = rowElement.insertCell(1);
        cell2.innerHTML = resident.name
        var cell3 = rowElement.insertCell(2);
        cell3.innerHTML = resident.age
        var cell4 = rowElement.insertCell(3);
        cell4.innerHTML = resident.ppsn
        var cell5 = rowElement.insertCell(4);
        cell5.innerHTML = '<button onclick="showUpdateRes(this)">Update</button>'
        var cell6 = rowElement.insertCell(5);
        cell6.innerHTML = '<button onclick=doDeleteRes(this)>Delete</button>'    
    }
    
    function addFeedbackToTable(feedback){
        var tableElement = document.getElementById('feedbackTable')
        var rowElement = tableElement.insertRow(-1)
        rowElement.setAttribute('id',feedback.id)
        var cell1 = rowElement.insertCell(0);
        cell1.innerHTML = feedback.id
        var cell2 = rowElement.insertCell(1);
        cell2.innerHTML = feedback.student_name
        var cell3 = rowElement.insertCell(2);
        cell3.innerHTML = resident.date
        var cell4 = rowElement.insertCell(3);
        cell4.innerHTML = resident.course_name
        var cell5 = rowElement.insertCell(4);
        cell5.innerHTML = '<button onclick="showUpdateRes(this)">Update</button>'
        var cell6 = rowElement.insertCell(5);
        cell6.innerHTML = '<button onclick=doDeleteRes(this)>Delete</button>'    
    }
    
    function clearResForm(){
        var form = document.getElementById('createUpdateForm')
    
        form.querySelector('input[name="id"]').value=''
        form.querySelector('input[name="name"]').value=''
        form.querySelector('input[name="age"]').value=''
        form.querySelector('input[name="ppsn"]').value=''
}

function clearFeedbackForm(){
        var form = document.getElementById('createFeedbackForm')
    
        form.querySelector('input[name="id"]').value=''
        form.querySelector('input[name="student_name"]').value=''
        form.querySelector('input[name="date"]').value=''
        form.querySelector('input[name="course_name"]').value=''
}

function getResidentFromRow(rowElement){
    var row ={}
    resident.id  = rowElement.getAttribute('id')
    resident.name = rowElement.cells[1].firstChild.textContent
    //project.staff = rowElement.cells[2].firstChild.textContent
    resident.age = parseInt(rowElement.cells[2].firstChild.textContent,10)
    resident.ppsn = rowElement.cells[3].firstChild.textContent
    return resident
}

function getFeedbackFromRow(rowElement){
    var row ={}
    feedback.id  = rowElement.getAttribute('id')
    feedback.student_name = rowElement.cells[1].firstChild.textContent
    //project.staff = rowElement.cells[2].firstChild.textContent
    feedback.date = parseInt(rowElement.cells[2].firstChild.textContent,10)
    feedback.course_name = rowElement.cells[3].firstChild.textContent
    return feedback
}

function setResidentInRow(rowElement, resident){
    rowElement.cells[0].firstChild.textContent= resident.id  
    rowElement.cells[1].firstChild.textContent= resident.name 
    rowElement.cells[2].firstChild.textContent= resident.age
    rowElement.cells[3].firstChild.textContent= resident.ppsn
}
   
function populateFormWithResident(resident){
    var form = document.getElementById('createUpdateForm')
    form.querySelector('input[name="id"]').disabled = true

    form.querySelector('input[name="id"]').value = resident.id
    form.querySelector('input[name="name"]').value = resident.name
    form.querySelector('input[name="age"]').value = resident.age
    form.querySelector('input[name="ppsn"]').value = resident.ppsn
    return resident
}

function getResidentFromForm(){
    var form = document.getElementById('createUpdateForm')
    var resident = {}
    resident.id = form.querySelector('input[name="id"]').value
    resident.name = form.querySelector('input[name="name"]').value
    resident.age = parseInt(form.querySelector('input[name="age"]').value,10)
    resident.ppsn = form.querySelector('input[name="ppsn"]').value
    console.log(JSON.stringify(resident))
    return resident
}

function getAllResAjax(){
    $.ajax({
        "url": "/resident",
        "method":"GET",
        "data":"",
        "dataType": "JSON",
        "success":function(result){
            //console.log(result);
            for (resident of result){
                addResidentToTable(resident);
            }
            
        },
        "error":function(xhr,status,error){
            console.log("error: "+status+" msg:"+error);
        }
    });

}

function printResidentAjax(){
    $.ajax({
        "url": "/resident",
        "method":"GET",
        "data":"",
        "dataType": "JSON",
        "success":function(result){
            //console.log(result);
            //for (resident of result){
                //addResidentToTable(resident);
                print(result);
            
        },
        "error":function(xhr,status,error){
            console.log("error: "+status+" msg:"+error);
        }
    });

}

function createResidentAjax(resident){
    //var project = {"id":1, "name":"E & T","staff":9}
    console.log(JSON.stringify(resident));
    $.ajax({
        "url": "/resident",
        "method":"POST",
        "data":JSON.stringify(resident),
        "dataType": "JSON",
        contentType: "application/json; charset=utf-8",
        "success":function(result){
            //console.log(result);
            resident.id = result.id
            addResidentToTable(resident)
            clearResForm()
            showViewAllRes()
        },
        "error":function(xhr,status,error){
            console.log("error: "+status+" msg:"+error);
        }
    });
}

function updateResidentAjax(resident){
    //var project = {"id":1, "name":"Education and Training","staff":33}
    console.log(JSON.stringify(resident));
    $.ajax({
        "url": "/resident/"+encodeURI(resident.id),
        "method":"PUT",
        "data":JSON.stringify(resident),
        "dataType": "JSON",
        contentType: "application/json; charset=utf-8",
        "success":function(result){
            // console.log(result);
                
        },
        "error":function(xhr,status,error){
            console.log("error: "+status+" msg:"+error);
        }
    });
}

function deleteResidentAjax(id){
            
            //console.log(JSON.stringify('deleting '+id));
            $.ajax({
                "url": "/resident/"+encodeURI(id),
                "method":"DELETE",
                "data":"",
                "dataType": "JSON",
                contentType: "application/json; charset=utf-8",
                "success":function(result){
                    //console.log(result);
                        
                },
                "error":function(xhr,status,error){
                    console.log("error: "+status+" msg:"+error);
                }
            });
        }

        getAllResAjax();
</script>
</html>
